- 悲观锁

  - 基于**线程阻塞**的锁机制，会导致线程上下文切换。

- 乐观锁

  - 基于**线程原地重试**的锁机制。
  - Java 内使用 `CAS` 实现乐观锁。
    - CompareAndSwap 及比较交换，比较当前值和预期值，如果相同，则更新为新值，否则失败。

- 优缺点

  - 悲观锁
    - 适合**写多读少**的场景：频繁加锁、释放锁会导致大量上下文切换，影响性能。
  - 乐观锁
    - 适合**读多写少**的场景：频繁写入会导致大量重试自旋，导致 CPU 飙升，影响性能。
    - ABA 问题：更新时，其他线程将值从 A 更新为 B，再更新为 A，此时当前线程无法感知到值的变化，会导致更新成功，但此时值已经发生过一次变更了，正确的结果应该是更新失败。通常加上**版本号**可解决。
